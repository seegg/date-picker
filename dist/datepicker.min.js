/*! For license information please see datepicker.min.js.LICENSE.txt */
(()=>{"use strict";var e={"./src/datepicker-layout.ts":(e,t,n)=>{n.r(t),n.d(t,{createDatePickerLayout:()=>o});var a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=["S","M","Tu","W","Th","F","S"],s=["<",">"],r=9999,o=function(e){var t=document.createElement("div");t.onpointerup=function(){e.setSelectMode(!1)},t.onpointerleave=function(){e.setSelectMode(!1)},t.classList.add("date-picker","".concat(e.isInMultiMonthSelectMode?"date-picker-long-select":"date-picker"));var n=c(e),a=u(e),i=d(s[0],e.prevMonth.bind(e)),r=d(s[1],e.nextMonth.bind(e)),o=g(),h=document.createElement("div");h.classList.add("date-picker-navHeader"),h.appendChild(i),h.appendChild(n),h.appendChild(a),h.appendChild(r),t.appendChild(h),t.appendChild(o);var p=l(e);return t.appendChild(p),t.oncontextmenu=function(e){e.preventDefault()},y(t),t},l=function(e){var t=document.createElement("div");t.id="days-container-"+e.id,t.classList.add("date-picker-days-container"),e.isInMultiMonthSelectMode&&t.classList.add("date-picker-long-select");for(var n=0;n<6;n++){var a=document.createElement("div");a.classList.add("date-picker-week");for(var i=0;i<7;i++){var s=f(e,7*n+i);a.appendChild(s)}t.appendChild(a)}return t},d=function(e,t){var n=document.createElement("div");return n.classList.add("date-picker-navArrow"),n.innerHTML=e,n.onclick=function(){t&&t()},n},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,n=document.createElement("div"),i=h(e,t);return n.id="picker-"+e.id+"-month",n.classList.add("date-picker-month"),n.innerHTML=t[e.month],n.appendChild(i),n.onclick=function(){var t;i.classList.add("date-picker-month-select-show");var n=null===(t=i.firstElementChild)||void 0===t?void 0:t.getBoundingClientRect().height;null==i||i.scrollTo(0,n*(e.month-1)||0),null==i||i.focus()},n},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,n=document.createElement("div");return n.classList.add("date-picker-month-select"),n.tabIndex=0,t.forEach((function(t,a){var i=document.createElement("div");i.classList.add("date-picker-month-select-name"),a%2!=0&&i.classList.add("date-picker-month-name-alt"),a===e.month&&i.classList.add("date-picker-month-select-selected"),i.innerHTML=t,i.onclick=function(){e.setMonth(a)},n.appendChild(i)})),n.onblur=function(){n.classList.remove("date-picker-month-select-show")},n},u=function(e){var t=document.createElement("div");t.id="picker-"+e.id+"-year",t.classList.add("date-picker-year"),t.innerHTML=e.year.toString();var n=p(e);return t.appendChild(n),t},p=function(e){var t=document.createElement("div"),n=D(e.year),a=m(e,e.year);n.value=e.year.toString(),t.classList.add("date-picker-year-select"),n.classList.add("date-picker-year-select-input"),t.tabIndex=1;!function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300}(v);var i=/^[1-9][0-9]{0,3}$|(^$)/i,s=n.value;return n.addEventListener("input",(function(e){console.log("input",n.value),i.test(n.value)?(""===n.value&&console.log(n.innerText,n.innerHTML),s=n.value):n.value=s})),t.appendChild(n),t.appendChild(a),t},v=function(e,t,n){var a=m(t,n);e.replaceChild(a,e.childNodes[1])},m=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:10,s=document.createElement("div"),o=n-a>=i?i:n-a;s.classList.add("date-picker-year-select-item-container");var l=t-Math.floor(o/2)>=a?t-Math.floor(o/2):a;l=t+Math.ceil(o/2)<=n?l:t-o;for(var d=function(t){var n=document.createElement("div"),a=l+t;n.innerHTML=a.toString(),n.classList.add("date-picker-year-select-item"),n.onclick=function(){e.setYear(a)},s.appendChild(n)},c=0;c<=o;c++)d(c);return s},D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,i=document.createElement("input");return i.type="text",i.max=t.toString(),i.min=n.toString(),i.step=a.toString(),i},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=document.createElement("div");t.classList.add("date-picker-week");for(var n=0;n<7;n++){var a=document.createElement("div");a.innerHTML=e[n],a.classList.add("day-of-week-label","date-picker-label"),0===n&&a.classList.add("day-of-week-sun"),t.appendChild(a)}return t},f=function(e,t){var n=document.createElement("div"),a=e.daysInMonth[t];n.classList.add("date-picker-day","date-picker-label"),n.oncontextmenu=function(){console.log(e.isInMultiMonthSelectMode),e.setMultiMonthDateRange(t)},n.onpointerdown=function(n){2!==n.button&&(e.isInMultiMonthSelectMode?e.setMultiMonthDateRange(t):(e.isInSelectMode=!0,e.setStartDateRange(t)))},n.onpointermove=function(n){n.preventDefault(),e.isInSelectMode&&e.setEndDateRange(t)},n.onpointerup=function(n){n.stopPropagation(),e.setEndDateRange(t),e.setSelectMode(!1)},a.month!==e.month&&n.classList.add("not-current-month");var i=document.createElement("p");return i.innerHTML=a.date.toString(),n.appendChild(i),n},y=function(e){var t=0;document.addEventListener("touchstart",(function(){t=(new Date).getTime()}),!0),document.addEventListener("touchstart",(function(){e.classList.remove("hasHover")}),!0),document.addEventListener("mousemove",(function(){(new Date).getTime()-t<500||e.classList.add("hasHover")}),!0)}},"./src/style.css":(e,t,n)=>{n.r(t)}},t={};function n(a){var i=t[a];if(void 0!==i)return i.exports;var s=t[a]={exports:{}};return e[a](s,s.exports,n),s.exports}n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};(()=>{n.r(a),n.d(a,{default:()=>o});n("./src/style.css");var e=n("./src/datepicker-layout.ts");function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function s(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=function(){function n(a,i){t(this,n),r(this,"daysInMonth",[]),r(this,"initialSelectedDate",null),r(this,"startDate",null),r(this,"endDate",null),r(this,"isSameDateValues",!0),r(this,"isInSelectMode",!1),r(this,"isInMultiMonthSelectMode",!1),this.id=n.baseID,n.baseID++,this.sendDateCallback=i,this.month=a.getMonth(),this.year=a.getFullYear(),this.daysInMonth=n.getDaysInMonth(this.year,this.month),this.pickerElem=(0,e.createDatePickerLayout)(this),this.pickerElemContainer=document.createElement("div"),this.pickerElemContainer.id="date-picker-container-"+this.id,this.pickerElemContainer.classList.add("date-picker-container"),this.pickerElemContainer.appendChild(this.pickerElem)}return s(n,[{key:"setYear",value:function(t){if(this.year!==t){this.year=t;var a=new Date(this.year,this.month,1);this.month=a.getMonth(),this.year=a.getFullYear(),this.daysInMonth=n.getDaysInMonth(this.year,this.month);var i=(0,e.createDatePickerLayout)(this);this.pickerElemContainer.replaceChild(i,this.pickerElem),this.pickerElem=i,this.highlightSelectedDateRange()}}},{key:"setMonth",value:function(t){if(this.month!==t){this.month=t;var a=new Date(this.year,this.month,1);this.month=a.getMonth(),this.year=a.getFullYear(),this.daysInMonth=n.getDaysInMonth(this.year,this.month);var i=(0,e.createDatePickerLayout)(this);this.pickerElemContainer.replaceChild(i,this.pickerElem),this.pickerElem=i,this.highlightSelectedDateRange()}}},{key:"nextMonth",value:function(){this.setMonth(this.month+1)}},{key:"prevMonth",value:function(){this.setMonth(this.month-1)}},{key:"setSelectMode",value:function(e){this.isInSelectMode=e,this.triggerDateCallback()}},{key:"getLayout",value:function(){return this.pickerElemContainer}},{key:"triggerDateCallback",value:function(){this.isSameDateValues||this.isInMultiMonthSelectMode||!this.isInSelectMode&&this.startDate&&this.endDate&&(this.sendDateCallback(this.startDate.toDate(),this.endDate.toDate()),this.isSameDateValues=!0)}},{key:"setStartDateRange",value:function(e){this.initialSelectedDate=this.daysInMonth[e],this.startDate&&this.endDate&&this.isInSelectedRange(this.initialSelectedDate.toDate())?this.deselectDateRange():(this.isSameDateValues=!1,this.startDate=this.initialSelectedDate,this.endDate=this.initialSelectedDate),this.highlightSelectedDateRange()}},{key:"setEndDateRange",value:function(e){this.initialSelectedDate&&this.isInSelectMode&&(this.endDate=this.daysInMonth[e],this.endDate.toDate().getTime()<this.initialSelectedDate.toDate().getTime()?(this.startDate=this.endDate,this.endDate=this.initialSelectedDate):this.startDate=this.initialSelectedDate,this.highlightSelectedDateRange())}},{key:"setMultiMonthDateRange",value:function(e){var t=document.getElementById("days-container-"+this.id);this.isInMultiMonthSelectMode?(null==t||t.classList.remove("date-picker-long-select"),this.endDate=this.daysInMonth[e],l.CompareDays(this.startDate,this.endDate)<0&&(this.startDate=this.endDate,this.endDate=this.initialSelectedDate),this.isInMultiMonthSelectMode=!1):(this.isSameDateValues=!1,this.initialSelectedDate=this.daysInMonth[e],this.isInSelectMode=!1,this.isInMultiMonthSelectMode=!0,this.startDate=this.initialSelectedDate,this.endDate=this.initialSelectedDate,null==t||t.classList.add("date-picker-long-select")),this.sendDateCallback(this.startDate.toDate(),this.endDate.toDate()),this.highlightSelectedDateRange(),this.isSameDateValues=!0}},{key:"deselectDateRange",value:function(){this.isInSelectMode=!1,this.startDate=null,this.endDate=null,this.sendDateCallback(this.startDate,this.endDate)}},{key:"highlightSelectedDateRange",value:function(){var e=this,t=this.pickerElemContainer.getElementsByClassName("date-picker-day");this.daysInMonth.forEach((function(n,a){e.isInSelectedRange(n.toDate())?t[a].classList.add("day-selected"):t[a].classList.remove("day-selected")}))}},{key:"isInSelectedRange",value:function(e){return null!==this.startDate&&null!==this.endDate&&n.checkIfDateIsWithinRange(e,this.startDate.toDate(),this.endDate.toDate())}}],[{key:"getDaysInMonth",value:function(e,t){var n=new Date(e,t,1),a=n.getDay();n.setDate(n.getDate()-a);for(var i=[],s=0;s<42;s++)i.push(new l(n.getFullYear(),n.getMonth(),n.getDate())),n.setDate(n.getDate()+1);return i}},{key:"checkIfDateIsWithinRange",value:function(e,t,n){return e.getTime()>=t.getTime()&&e.getTime()<=n.getTime()}}]),n}();r(o,"baseID",1);var l=function(){function e(n,a,i){t(this,e);var s=new Date(n,a,i);this.year=n,this.date=s.getDate(),this.dayOfWeek=s.getDay(),this.month=s.getMonth()}return s(e,[{key:"toDate",value:function(){return new Date(this.year,this.month,this.date)}}],[{key:"CompareDays",value:function(e,t){if(null!==e&&null!==t){var n=e.toDate().getTime(),a=t.toDate().getTime();return n>a?-1:a>n?1:0}}}]),e}()})()})();
//# sourceMappingURL=datepicker.min.js.map