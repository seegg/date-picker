/*! For license information please see demo.min.js.LICENSE.txt */
(()=>{"use strict";var e={"./src/Datepicker.ts":(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});a("./src/style.css");var n=a("./src/datepicker-layout.ts");function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var c=function(){function e(t,a,r){i(this,e),l(this,"daysInMonth",[]),l(this,"initialSelectedDate",null),l(this,"startDate",null),l(this,"endDate",null),l(this,"isSameDateValues",!0),l(this,"isInSelectMode",!1),l(this,"isInMultiMonthSelectMode",!1),this.id=e.baseID,e.baseID++,this.fullDate=t,this.sendDateCallback=a,this.daysInMonth=e.GetDaysInMonth(this.fullDate.getFullYear(),this.fullDate.getMonth()),this.pickerView=(0,n.createDatePickerLayout)(this,r)}return s(e,[{key:"month",get:function(){return this.fullDate.getMonth()}},{key:"year",get:function(){return this.fullDate.getFullYear()}},{key:"setYear",value:function(t){if(this.year!==t){var a=t>n.maxYearDefault?n.maxYearDefault:t<n.minYearDefault?n.minYearDefault:t;this.fullDate.setFullYear(a),this.daysInMonth=e.GetDaysInMonth(this.year,this.month);var i=(0,n.createDatePickerLayout)(this);this.updateView(i)}}},{key:"setMonth",value:function(t){if(this.month!==t&&!(this.fullDate.getFullYear()===n.maxYearDefault&&t>11||this.fullDate.getFullYear()===n.minYearDefault&&t<0)){this.fullDate.setMonth(t),this.daysInMonth=e.GetDaysInMonth(this.year,this.month);var a=(0,n.createDatePickerLayout)(this);this.updateView(a)}}},{key:"updateView",value:function(e){this.pickerView.container.replaceChild(e.layout,this.pickerView.layout),this.pickerView.layout=e.layout,this.highlightSelectedDateRange()}},{key:"nextMonth",value:function(){this.setMonth(this.month+1)}},{key:"prevMonth",value:function(){this.setMonth(this.month-1)}},{key:"setSelectMode",value:function(e){this.isInSelectMode=e,this.triggerDateCallback()}},{key:"getLayout",value:function(){return this.pickerView.container}},{key:"triggerDateCallback",value:function(){this.isSameDateValues||this.isInMultiMonthSelectMode||!this.isInSelectMode&&this.startDate&&this.endDate&&(this.sendDateCallback(this.startDate.toDate(),this.endDate.toDate()),this.isSameDateValues=!0)}},{key:"setStartDateRange",value:function(e){this.initialSelectedDate=this.daysInMonth[e],this.startDate&&this.endDate&&this.isInSelectedRange(this.initialSelectedDate.toDate())?this.deselectDateRange():(this.isSameDateValues=!1,this.startDate=this.initialSelectedDate,this.endDate=this.initialSelectedDate),this.highlightSelectedDateRange()}},{key:"setEndDateRange",value:function(e){this.initialSelectedDate&&this.isInSelectMode&&(this.endDate=this.daysInMonth[e],this.endDate.toDate().getTime()<this.initialSelectedDate.toDate().getTime()?(this.startDate=this.endDate,this.endDate=this.initialSelectedDate):this.startDate=this.initialSelectedDate,this.highlightSelectedDateRange())}},{key:"setMultiMonthDateRange",value:function(e){document.getElementById("days-container-"+this.id);this.isInMultiMonthSelectMode?(this.endDate=this.daysInMonth[e],o.CompareDays(this.startDate,this.endDate)<0&&(this.startDate=this.endDate,this.endDate=this.initialSelectedDate),this.isInMultiMonthSelectMode=!1):(this.isSameDateValues=!1,this.initialSelectedDate=this.daysInMonth[e],this.isInSelectMode=!1,this.isInMultiMonthSelectMode=!0,this.startDate=this.initialSelectedDate,this.endDate=this.initialSelectedDate),this.sendDateCallback(this.startDate.toDate(),this.endDate.toDate()),this.highlightSelectedDateRange(),this.isSameDateValues=!0}},{key:"deselectDateRange",value:function(){this.isInSelectMode=!1,this.startDate=null,this.endDate=null,this.sendDateCallback(this.startDate,this.endDate)}},{key:"highlightSelectedDateRange",value:function(){var e=this,t=this.pickerView.container.getElementsByClassName("date-picker-day");this.daysInMonth.forEach((function(a,n){e.isInSelectedRange(a.toDate())?t[n].classList.add("day-selected"):t[n].classList.remove("day-selected")}))}},{key:"isInSelectedRange",value:function(t){return null!==this.startDate&&null!==this.endDate&&e.IsDateWithinRange(t,this.startDate.toDate(),this.endDate.toDate())}}],[{key:"GetDaysInMonth",value:function(e,t){var a=new Date(e,t,1);a.setFullYear(e);var n=a.getDay();a.setDate(a.getDate()-n);for(var i=[],r=0;r<42;r++)i.push(new o(a.getFullYear(),a.getMonth(),a.getDate())),a.setDate(a.getDate()+1);return i}},{key:"IsDateWithinRange",value:function(e,t,a){return e.getTime()>=t.getTime()&&e.getTime()<=a.getTime()}}]),e}();l(c,"baseID",1);var o=function(){function e(t,a,n){i(this,e);var r=new Date(t,a,n);r.setFullYear(t),this.fullDate=r}return s(e,[{key:"year",get:function(){return this.fullDate.getFullYear()}},{key:"month",get:function(){return this.fullDate.getMonth()}},{key:"date",get:function(){return this.fullDate.getDate()}},{key:"dayOfWeek",get:function(){return this.fullDate.getDay()}},{key:"toDate",value:function(){return this.fullDate}}],[{key:"CompareDays",value:function(e,t){if(null!==e&&null!==t){var a=e.toDate().getTime(),n=t.toDate().getTime();return a>n?-1:n>a?1:0}}}]),e}()},"./src/date.ts":(e,t,a)=>{a.r(t),a.d(t,{createDatesInMonth:()=>n});var n=function(e){var t=document.createElement("div");t.id="days-container-"+e.id,t.classList.add("date-picker-days-container");for(var a=0;a<6;a++){var n=document.createElement("div");n.classList.add("date-picker-week");for(var r=0;r<7;r++){var s=i(e,7*a+r);n.appendChild(s)}t.appendChild(n)}return t},i=function(e,t){var a=document.createElement("div"),n=e.daysInMonth[t];return a.classList.add("date-picker-day","date-picker-label"),a.oncontextmenu=function(){e.setMultiMonthDateRange(t),r(e)},a.onpointerdown=function(a){2!==a.button&&(e.isInMultiMonthSelectMode?(e.setMultiMonthDateRange(t),r(e)):(e.isInSelectMode=!0,e.setStartDateRange(t)))},a.onpointermove=function(a){a.preventDefault(),e.isInSelectMode&&e.setEndDateRange(t)},a.onpointerup=function(a){a.stopPropagation(),e.setEndDateRange(t),e.setSelectMode(!1)},n.month!==e.month&&a.classList.add("not-current-month"),a.innerHTML=n.date.toString(),a},r=function(e){e.isInMultiMonthSelectMode?(e.pickerView.container.classList.add("date-picker-long-select"),console.log("add")):(e.pickerView.container.classList.remove("date-picker-long-select"),console.log("remove"))}},"./src/datepicker-layout.ts":(e,t,a)=>{a.r(t),a.d(t,{maxYearDefault:()=>l,minYearDefault:()=>c,createDatePickerLayout:()=>o});var n=a("./src/date.ts"),i=a("./src/month.ts"),r=a("./src/year.ts"),s=a("./src/util.ts"),l=9999,c=1,o=function(e,t){var a=["<",">"],l=document.createElement("div");(l=document.createElement("div")).id="date-picker-container-"+e.id,l.classList.add("date-picker-container","".concat(e.isInMultiMonthSelectMode?"date-picker-long-select":"date-picker-container"));var c=document.createElement("div");c.onpointerup=function(){e.setSelectMode(!1)},c.onpointerleave=function(){e.setSelectMode(!1)},c.classList.add("date-picker");var o=(0,i.createMonth)(e,["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),h=(0,r.createYear)(e),D=d(a[0],e.prevMonth.bind(e)),p=d(a[1],e.nextMonth.bind(e)),v=u(["S","M","Tu","W","Th","F","S"]),f=document.createElement("div");f.classList.add("date-picker-navHeader"),f.appendChild(D),f.appendChild(o),f.appendChild(h),f.appendChild(p),c.appendChild(f),c.appendChild(v);var m=(0,n.createDatesInMonth)(e);return c.appendChild(m),c.oncontextmenu=function(e){e.preventDefault()},(0,s.disableHoverOnTouch)(l),l.appendChild(c),{container:l,layout:c}},d=function(e,t){var a=document.createElement("div");return a.classList.add("date-picker-navArrow"),a.innerHTML=e,a.onpointerdown=function(){t&&t()},a},u=function(e){var t=document.createElement("div");t.classList.add("date-picker-week");for(var a=0;a<7;a++){var n=document.createElement("div");n.innerHTML=e[a],n.classList.add("day-of-week-label","date-picker-label"),0===a&&n.classList.add("day-of-week-sun"),t.appendChild(n)}return t}},"./src/month.ts":(e,t,a)=>{a.r(t),a.d(t,{createMonth:()=>n,createMonthSelect:()=>i});var n=function(e,t){var a=document.createElement("div"),n=i(e,t);return a.id="picker-"+e.id+"-month",a.classList.add("date-picker-month"),a.innerHTML=t[e.month],a.appendChild(n),a.onclick=function(){var t;n.classList.add("date-picker-month-select-show");var a=null===(t=n.firstElementChild)||void 0===t?void 0:t.getBoundingClientRect().height;null==n||n.scrollTo(0,a*(e.month-1)||0),null==n||n.focus()},a},i=function(e,t){var a=document.createElement("div");return a.classList.add("date-picker-month-select"),a.tabIndex=-2,t.forEach((function(t,n){var i=document.createElement("div");i.classList.add("date-picker-month-select-name"),n%2!=0&&i.classList.add("date-picker-month-name-alt"),n===e.month&&i.classList.add("date-picker-month-select-selected"),i.innerHTML=t,i.onclick=function(){e.setMonth(n)},a.appendChild(i)})),a.onblur=function(){a.classList.remove("date-picker-month-select-show")},a}},"./src/util.ts":(e,t,a)=>{a.r(t),a.d(t,{disableHoverOnTouch:()=>n,debounce:()=>i,resetDate:()=>r});var n=function(e){var t=0;document.addEventListener("touchstart",(function(){t=(new Date).getTime()}),!0),document.addEventListener("touchstart",(function(){e.classList.remove("hasHover")}),!0),document.addEventListener("mousemove",(function(){(new Date).getTime()-t<500||e.classList.add("hasHover")}),!0)};function i(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];clearTimeout(t),t=setTimeout((function(){e.apply(null,i)}),a)}}var r=function(e){var t=new Date;return t.setFullYear(e.getFullYear()),t.setMonth(e.getMonth()),t.setDate(1),t}},"./src/year.ts":(e,t,a)=>{a.r(t),a.d(t,{createYear:()=>r});var n=a("./src/util.ts"),i=a("./src/datepicker-layout.ts"),r=function(e){var t=document.createElement("div");t.id="picker-"+e.id+"-year",t.classList.add("date-picker-year"),t.innerHTML=e.year.toString();var a=s(e);return t.appendChild(a),t.onclick=function(){a.classList.add("date-picker-year-select-show"),a.focus()},t},s=function(e){var t=document.createElement("div"),a=d(e.year),i=o(e,e.year);t.classList.add("date-picker-year-select"),a.classList.add("date-picker-year-select-input"),t.tabIndex=-1;var r=(0,n.debounce)(l),s=/^[1-9][0-9]{0,3}$|(^$)/i,u=a.value;return a.addEventListener("input",(function(){s.test(a.value)?(u=a.value,r(t,e,Number(u)||"")):a.value=u})),a.onblur=function(a){t.contains(a.relatedTarget)||(t.classList.remove("date-picker-year-select-show"),l(t,e,e.year))},t.onfocus=function(){a.value=e.year.toString(),a.dispatchEvent(new Event("input")),c(t,Number(a.value)||null),a.focus()},t.appendChild(a),t.appendChild(i),t},l=function(e,t,a){var n=a?o(t,a):document.createElement("div");a?n=o(t,a):(console.log("empty"),(n=document.createElement("div")).classList.add("date-picker-year-select-empty")),e.replaceChild(n,e.childNodes[1]),c(e,a||null)},c=function(e,t){if(null!==t)try{var a=e.childNodes[1],n=a.firstChild,i=t-Number(n.innerHTML),r=n.getBoundingClientRect().height;a.scrollTo(0,(i-2)*r)}catch(e){console.log(e)}},o=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.maxYearDefault,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i.minYearDefault,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:10,s=document.createElement("div"),l=a-n>=r?r:a-n;s.classList.add("date-picker-year-select-item-container");var c=t-Math.floor(l/2)>=n?t-Math.floor(l/2):n;c=t+Math.ceil(l/2)<=a?t:a-l;for(var o=function(a){var n=document.createElement("div");n.tabIndex=-(a+100);var i=c+a;n.innerHTML=i.toString();var r=i===t?"date-picker-year-select-selected":"date-picker-year-select-item";n.classList.add("date-picker-year-select-item",r),n.onclick=function(){e.setYear(i)},s.appendChild(n)},d=0;d<=l;d++)o(d);return s},d=function(e){var t=document.createElement("input");return t.type="text",t.value=e.toString(),t}},"./src/style.css":(e,t,a)=>{a.r(t)}},t={};function a(n){var i=t[n];if(void 0!==i)return i.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,a),r.exports}a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{a.r(n);var e=a("./src/Datepicker.ts"),t=new e.default(new Date(9999,2,1),(function(e,t){var a=document.getElementById("date-input");null===e||null===t?a.value="":e.getTime()===t.getTime()?a.value=s(e):a.value=s(e)+" to "+s(t)})),i=document.createElement("div");i.style.height="50px";var r=new e.default(new Date,(function(e,t){i.innerHTML=e&&t?"start: ".concat(s(e)," end: ").concat(s(t)):"no dates selected"})),s=function(e){return e?"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear()):""},l=document.getElementById("date-picker");null==l||l.appendChild(t.getLayout()),null==l||l.appendChild(document.createElement("br")),null==l||l.appendChild(r.getLayout()),null==l||l.appendChild(document.createElement("br")),null==l||l.appendChild(i)})()})();
//# sourceMappingURL=demo.min.js.map